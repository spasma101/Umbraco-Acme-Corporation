@inherits Umbraco.Web.Mvc.UmbracoViewPage
<!--********************************************-->
<!--THIS IS WHERE TO INITIATE ANY CUSTOM SCRIPTS-->
<!--********************************************-->

<script>
	//cookie_bar.init();
	//header_scroll.init();
	//mobile_nav.init();
</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/src/scripts/competition_form.js"></script>
<script src="/src/scripts/product_purchase_form.js"></script>
<script>
	competition_form.init();
	product_purchase_form.init();
</script>

<script type="text/javascript">
	$(document).ready(function () {
		//Intercept Submit button in order to make ajax call instead of a postback
		$('#competition_form').preventDoubleSubmission();
	});

	// jQuery plugin to prevent double submission of forms
	jQuery.fn.preventDoubleSubmission = function () {
		$(this).on('submit', function (e) {
			e.preventDefault();

			var $form = $(this);

			if ($form.data('submitted') === true) {
				// Previously submitted - don't submit again
			} else {
				if ($form.valid()) {
					// Mark it so that the next submit can be ignored
					$form.data('submitted', true);

					// Make ajax call form submission
					$.ajax({
						url: $form.attr('action'),
						type: 'POST',
						cache: false,
						data: $form.serialize(),
						success: function (result) {
							console.log(result);
							//ToDo: Add code to replace html inside the div that holds the form with a Success message.
						}
					});
				}
			}
		});

		// Keep chainability
		return this;
	};
</script>